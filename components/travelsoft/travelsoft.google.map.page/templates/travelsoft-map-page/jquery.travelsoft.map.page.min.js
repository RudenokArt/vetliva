"use strict";!function(e,t,n){e(t.document).ready(function(){function a(){var a=e("#navigation-form"),l=a.serialize(),r=o(l)||null,d=null;x.show(),i(),r&&"undefined"!=typeof w[r]?(s(w[r].items),e("#searching__cnt__elements").text(w[r].cnt),t.history.pushState(null,null,w[r].url),x.hide()):(d=l?a.attr("action")+"?"+l:a.attr("action"),e.post(d,{__compid:"__travelsoft_df96dd9a12aed7a764ab1d004e9260fd",sessid:n},function(n){return n.error?(alert("Some error :("),!1):(s(n.items),n.cntElements=Number(n.cntElements),e("#searching__cnt__elements").text(n.cntElements),r&&(w[r]={items:n.items,cnt:n.cntElements,url:d}),t.history.pushState(null,null,d),void x.hide())},"json"))}function l(e){var n,a,l,i=new t.google.maps.InfoWindow({maxWidth:600}),o=new t.google.maps.LatLng(e.lat,e.lng);return n="<div class='maps-item'>",l="style='margin-left: 0px'",e.img&&(n+="<a href='#' class='maps-image'>",n+="<img src='"+e.img+"' alt='"+e.title+"'>",n+="</a>",l=""),n+="<div class='maps-text'"+l+">",n+="<h2><a href='"+e.page+"'>"+e.title+"</a></h2>",e.address&&(n+="<address>"+e.address+"</address>"),n+="</div></div>",a=new t.google.maps.Marker({position:o,map:g,icon:e.icon,title:e.title}),t.google.maps.event.addListener(a,"click",function(e){return function(){i.setContent(n),i.open(g,e)}}(a)),a}function i(){var e,t=v.length;for(e=0;t>e;e++)v[e].setMap(null);v=[],h.clearMarkers()}function o(e){var t,n,a=0,l=e.length;if(!l)return a;for(t=0;l>t;t++)n=e.charCodeAt(t),a=(a<<5)-a+n,a&=a;return a}function s(e){var n,a,i;if("object"==typeof e&&e){a=new t.google.maps.LatLngBounds;for(n in e)i=e[n],v.push(l({lat:i.lat,lng:i.lng,img:i.img,icon:i.icon,title:i.title,page:i.page,address:i.address,text:i.text})),a.extend(new t.google.maps.LatLng(i.lat,i.lng));g.fitBounds(a),h.addMarkers(v)}}function r(t){t.find("li.group").each(function(){e(this).find(".optgroup").each(function(){var n,a=e(this),l=a.data("group"),i="&nbsp;&nbsp;&nbsp;<span class='__sh #CLASS#'>#__SH_TITLE#</span>";l&&(n=t.find("input[data-group='"+l+"']"),n.length&&(t.find("input[data-group='"+l+"']:checked").length?a.append(i.replace("#__SH_TITLE#",y.__hide).replace("#CLASS#","active")):(a.append(i.replace("#__SH_TITLE#",y.__show).replace("#CLASS#","")),d(n.closest("li")))))})})}function d(e,t,n){t?(e.css({height:"auto","max-width":"none"}),n&&n.addClass("active").text(y.__hide)):(e.css({height:0,"max-width":0}),n&&n.removeClass("active").text(y.__show))}var c,p,u="hotel-maps",g=null,h=null,f={lat:53.55,lng:27.33},m=6,v=[],_=t.document,w={},x=function(e){var n="preloader";return e(t.doument).ready(function(){if(!e("#"+n).length){var t='<div id="'+n+'"><div class="tb-cell"><div id="page-loading"><div></div></div></div></div>';e("body").append(t)}}),{show:function(){e("#"+n).css({display:"table"})},hide:function(){e("#"+n).fadeOut(500)}}}(e),S=["#locations","#points"],L=[e(S[0]).data("placeholder"),e(S[1]).data("placeholder")],k=[!0,!0],y=e("#navigation-form").data("lang-phrases");for(g=new t.google.maps.Map(_.getElementById(u),{zoom:m,scrollwheel:!1,mapTypeId:t.google.maps.MapTypeId.ROADMAP,center:f}),h=new MarkerClusterer(g,[],{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"}),s(e("#"+u).data("json-items")),c=0;c<S.length;c++)p=e(S[c]),p.multipleSelect({multiple:!0,placeholder:L[c],filter:!0,multipleWidth:150,width:"46%",selectAllText:y.selectAllText,allSelected:y.allSelected,countSelected:y.countSelected,noMatchesFound:y.noMatchesFound,onClick:a,onOpen:function(e,t){return function(){k[e]&&(k[e]=!1,r(t.next().find(".ms-drop").find("ul")))}}(c,p),onOptgroupClick:function(t){var n=e(t.children),l=e(t.children).closest("li"),i=n.first().data("group");d(l,t.checked,l.first().closest("ul").find("label[data-group='"+i+"']").find(".__sh")),a()},onCheckAll:function(){a()},onUncheckAll:function(){a()}});e(_).on("click",".__sh",function(t){var n,a=e(this),l=a.closest(".optgroup").data("group");l&&(n=a.closest("ul").find("input[data-group='"+l+"']"),n.length&&d(n.closest("li"),!a.hasClass("active"),a)),t.preventDefault(),t.stopPropagation()}),t.addEventListener("popstate",function(){t.location.reload()})})}(jQuery,window,BX.bitrix_sessid);